OVERALL PROCEDURE (Feb 2 2017)

Take photos

0. Create a chart of possible filter combinations. Do this before the photo session to avoid scrambling.
1. Connect the camera to laptop. Open AstroCap. In Astrocap, set the color type to RAW (Mono) and check in settings that the image type is set to FITS.
2. Create a folder for the day.
3. Take a photo of clear sky that will be used to gauge the sky value.
4. Take photos of cirrus clouds with varying exposures, depending on what exposure seems to produce a visible image. Store photos in appropriately labeled folders indicating filters used and exposure. The format is:
        <Number>/XXX<unit>
        For example:
        15/300microsec

        For combinations of filters use:
        <Number>-<Number2>/XXX<unit>
        For example:
        15-82a/300microsec

        Where the first item in the name is the first filter used (the one closest to the CCD)

Use imexam to get basic statistics about each file

1. Open a terminal and activate the iraf environment: source activate iraf27 (or whatever its name is)
2. Open a ds9 window with the command ds9 &
3. Navigate to the Python scripts folder
4. Run the file collect_skystats.py
5. When the image opens in DS9, bring DS9 to the focus, hover over the image with the mouse and use the custom key (probably 'i' unless it has been changed) to collect stats. That is, hover the mouse over an area of clear sky and press the i key. Do this in 4 spots for each image.
6. Also run imexam on the clear sky photo (if available). Compare with sky values in other photos.

File cleanup

1. If multiple files for a given filter and exposure combination exist, combine their contents into one file. 
2. If only one file exists for given filter and exposure combination, rename the file and move a copy to the Analysis Files folder.

Details and code are needed for this part of the procedure.

	
Generate tidy files of image stats

1. Open the pyraf environment and run the command "from tidy_stats import *"
2. Run summarize_set to create a nice file of format: IMAGE   SKYVAL   SIGMA   SKYVAL ERR   EXPOSURE   FILTER 1   FILTER 2   PATH	. You must feed in the path to the files from the previous section, such as /home/emc/GoogleDrive/Phys/Research/BothunLab/AnalysisFiles/Bias/bias imexam results
3. Check file when done

Do photometry

1. In the pyraf environment, import eveything from polyphot_batch.py.
2. Call do_photometry() at the prompt to do photometry on collected images.

Do photometry MANUALLY


1. Open image FIT file (manually using GUI because display command won't work for some reason) in DS9
2. Draw a circular region around the moon. To do so, make sure Region > Shape > Circle is selected, then under Edit, select "Region".
3. Run the polyphot commands, which are stored in the location: /home/emc/GoogleDrive/Phys/Research/BothunLab/AnalysisFiles/10-April-2017_dataset.
4. When cursor starts blinking, press g to define a polygon. Use the spacebar to trace the circle drawn in DS9 (the circle is just there to make your polygon fairly accurate).
5. When finished drawing polygon, press q to finish polygon.
6. Press j to do the photometry of the polygon and send it to the log file.
7. Press q again when DS9 in focus and then a second time with terminal in focus.




Calculate the flux ratios

Working on this now!

1. Run calc_flux_ratio.py.